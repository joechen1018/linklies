/*!
  * jquery rect (c) Martin Tillmann
  * https://github.com/mtillmann/jquery-rect
  * MIT License
*/
(function(a){a.rect=function(c,l){var g=this;var d={position:"position",dimension:"outer",withMargin:true};g.settings={};var j=function(){g.settings=a.extend({},d,l);g.el=c};g.getRect=function(m){return e(a.extend(m[g.settings.position](),h(m)))};g.getBox=function(m){return f(g.getRect(m))};var k=function(m){return{left:m.left,top:m.top,width:m.right-m.left,height:m.bottom-m.top}};var f=function(m){return{left:m.left,top:m.top,right:m.left+m.width,bottom:m.top+m.height}};var e=function(o){var n,m={};for(n in o){m[n]=parseFloat(o[n])}return m};var i=function(o){var n,m={};for(n in o){m[n]=parseFloat(o[n])+"px"}return m};var h=function(m){return g.settings.dimension!="css"?{width:a(m).outerWidth(g.settings.withMargin),height:a(m).outerHeight(g.settings.withMargin)}:{width:a(m).css("width"),height:a(m).css("height")}};var b=function(m){if(!m.width&&!m.height){return(m.right-m.left)*(m.bottom-m.top)}return m.width*m.height};g.intersects=function(p,o){if(!p){return false}var n=g.getBox(g.el),m=g.getBox(p);if(n.left<=m.right&&m.left<=n.right&&n.top<=m.bottom&&m.top<=n.bottom){if(o){return[n,m]}return true}return false};g.intersection=function(q,u,n){var t=g.intersects(q,true);if(!t){return false}var x=t[0],v=t[1],r=Math.max(x.left,v.left),o=Math.min(x.right,v.right),y,w,m;if(r<=o){y=Math.max(x.top,v.top);w=Math.min(x.bottom,v.bottom);if(y<=w){m={left:r,top:y,right:o,bottom:w};if(u=="box"){return m}if(u=="portion"){var s=b(x),p=b(k(m));return p/s}return k(m)}}return null};j()}}(jQuery));

/*!
  * jquery mouse-wheel
*/

(function(e){function r(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=true,o=0,u=0;t=e.event.fix(n);t.type="mousewheel";if(n.wheelDelta){i=n.wheelDelta/120}if(n.detail){i=-n.detail/3}u=i;if(n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS){u=0;o=-1*i}if(n.wheelDeltaY!==undefined){u=n.wheelDeltaY/120}if(n.wheelDeltaX!==undefined){o=-1*n.wheelDeltaX/120}r.unshift(t,i,o,u);return(e.event.dispatch||e.event.handle).apply(this,r)}var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks){for(var n=t.length;n;){e.event.fixHooks[t[--n]]=e.event.mouseHooks}}e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=t.length;e;){this.addEventListener(t[--e],r,false)}}else{this.onmousewheel=r}},teardown:function(){if(this.removeEventListener){for(var e=t.length;e;){this.removeEventListener(t[--e],r,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})(jQuery)

/*!
  * jquery perfect scrollbar
*/

(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){var t={wheelSpeed:10,wheelPropagation:false,minScrollbarLength:null,useBothWheelAxes:false,useKeyboard:true,suppressScrollX:false,suppressScrollY:false,scrollXMarginOffset:0,scrollYMarginOffset:0};var n=function(){var e=0;return function(){var t=e;e+=1;return".perfect-scrollbar-"+t}}();e.fn.perfectScrollbar=function(r,i){return this.each(function(){var s=e.extend(true,{},t),o=e(this);if(typeof r==="object"){e.extend(true,s,r)}else{i=r}if(i==="update"){if(o.data("perfect-scrollbar-update")){o.data("perfect-scrollbar-update")()}return o}else if(i==="destroy"){if(o.data("perfect-scrollbar-destroy")){o.data("perfect-scrollbar-destroy")()}return o}if(o.data("perfect-scrollbar")){return o.data("perfect-scrollbar")}o.addClass("ps-container");var u=e("<div class='ps-scrollbar-x-rail'></div>").appendTo(o),a=e("<div class='ps-scrollbar-y-rail'></div>").appendTo(o),f=e("<div class='ps-scrollbar-x'></div>").appendTo(u),l=e("<div class='ps-scrollbar-y'></div>").appendTo(a),c,h,p,d,v,m,g,y,b=parseInt(u.css("bottom"),10),w,E,S=parseInt(a.css("right"),10),x=n();var T=function(e,t){var n=e+t,r=d-w;if(n<0){E=0}else if(n>r){E=r}else{E=n}var i=parseInt(E*(m-d)/(d-w),10);o.scrollTop(i);u.css({bottom:b-i})};var N=function(e,t){var n=e+t,r=p-g;if(n<0){y=0}else if(n>r){y=r}else{y=n}var i=parseInt(y*(v-p)/(p-g),10);o.scrollLeft(i);a.css({right:S-i})};var C=function(e){if(s.minScrollbarLength){e=Math.max(e,s.minScrollbarLength)}return e};var k=function(){u.css({left:o.scrollLeft(),bottom:b-o.scrollTop(),width:p,display:c?"inherit":"none"});a.css({top:o.scrollTop(),right:S-o.scrollLeft(),height:d,display:h?"inherit":"none"});f.css({left:y,width:g});l.css({top:E,height:w})};var L=function(){p=o.width();d=o.height();v=o.prop("scrollWidth");m=o.prop("scrollHeight");if(!s.suppressScrollX&&p+s.scrollXMarginOffset<v){c=true;g=C(parseInt(p*p/v,10));y=parseInt(o.scrollLeft()*(p-g)/(v-p),10)}else{c=false;g=0;y=0;o.scrollLeft(0)}if(!s.suppressScrollY&&d+s.scrollYMarginOffset<m){h=true;w=C(parseInt(d*d/m,10));E=parseInt(o.scrollTop()*(d-w)/(m-d),10)}else{h=false;w=0;E=0;o.scrollTop(0)}if(E>=d-w){E=d-w}if(y>=p-g){y=p-g}k()};var A=function(){var t,n;f.bind("mousedown"+x,function(e){n=e.pageX;t=f.position().left;u.addClass("in-scrolling");e.stopPropagation();e.preventDefault()});e(document).bind("mousemove"+x,function(e){if(u.hasClass("in-scrolling")){N(t,e.pageX-n);e.stopPropagation();e.preventDefault()}});e(document).bind("mouseup"+x,function(e){if(u.hasClass("in-scrolling")){u.removeClass("in-scrolling")}});t=n=null};var O=function(){var t,n;l.bind("mousedown"+x,function(e){n=e.pageY;t=l.position().top;a.addClass("in-scrolling");e.stopPropagation();e.preventDefault()});e(document).bind("mousemove"+x,function(e){if(a.hasClass("in-scrolling")){T(t,e.pageY-n);e.stopPropagation();e.preventDefault()}});e(document).bind("mouseup"+x,function(e){if(a.hasClass("in-scrolling")){a.removeClass("in-scrolling")}});t=n=null};var M=function(e,t){var n=o.scrollTop();if(e===0){if(!h){return false}if(n===0&&t>0||n>=m-d&&t<0){return!s.wheelPropagation}}var r=o.scrollLeft();if(t===0){if(!c){return false}if(r===0&&e<0||r>=v-p&&e>0){return!s.wheelPropagation}}return true};var _=function(){var e=false;o.bind("mousewheel"+x,function(t,n,r,i){if(!s.useBothWheelAxes){o.scrollTop(o.scrollTop()-i*s.wheelSpeed);o.scrollLeft(o.scrollLeft()+r*s.wheelSpeed)}else if(h&&!c){if(i){o.scrollTop(o.scrollTop()-i*s.wheelSpeed)}else{o.scrollTop(o.scrollTop()+r*s.wheelSpeed)}}else if(c&&!h){if(r){o.scrollLeft(o.scrollLeft()+r*s.wheelSpeed)}else{o.scrollLeft(o.scrollLeft()-i*s.wheelSpeed)}}L();e=M(r,i);if(e){t.preventDefault()}});o.bind("MozMousePixelScroll"+x,function(t){if(e){t.preventDefault()}})};var D=function(){var t=false;o.bind("mouseenter"+x,function(e){t=true});o.bind("mouseleave"+x,function(e){t=false});var n=false;e(document).bind("keydown"+x,function(e){if(!t){return}var r=0,i=0;switch(e.which){case 37:r=-3;break;case 38:i=3;break;case 39:r=3;break;case 40:i=-3;break;case 33:i=9;break;case 32:case 34:i=-9;break;case 35:i=-d;break;case 36:i=d;break;default:return}o.scrollTop(o.scrollTop()-i*s.wheelSpeed);o.scrollLeft(o.scrollLeft()+r*s.wheelSpeed);n=M(r,i);if(n){e.preventDefault()}})};var P=function(){var e=function(e){e.stopPropagation()};l.bind("click"+x,e);a.bind("click"+x,function(e){var t=parseInt(w/2,10),n=e.pageY-a.offset().top-t,r=d-w,i=n/r;if(i<0){i=0}else if(i>1){i=1}o.scrollTop((m-d)*i)});f.bind("click"+x,e);u.bind("click"+x,function(e){var t=parseInt(g/2,10),n=e.pageX-u.offset().left-t,r=p-g,i=n/r;if(i<0){i=0}else if(i>1){i=1}o.scrollLeft((v-p)*i)})};var H=function(){var t=function(e,t){o.scrollTop(o.scrollTop()-t);o.scrollLeft(o.scrollLeft()-e);L()};var n={},r=0,i={},s=null,u=false;e(window).bind("touchstart"+x,function(e){u=true});e(window).bind("touchend"+x,function(e){u=false});o.bind("touchstart"+x,function(e){var t=e.originalEvent.targetTouches[0];n.pageX=t.pageX;n.pageY=t.pageY;r=(new Date).getTime();if(s!==null){clearInterval(s)}e.stopPropagation()});o.bind("touchmove"+x,function(e){if(!u&&e.originalEvent.targetTouches.length===1){var s=e.originalEvent.targetTouches[0];var o={};o.pageX=s.pageX;o.pageY=s.pageY;var a=o.pageX-n.pageX,f=o.pageY-n.pageY;t(a,f);n=o;var l=(new Date).getTime();i.x=a/(l-r);i.y=f/(l-r);r=l;e.preventDefault()}});o.bind("touchend"+x,function(e){clearInterval(s);s=setInterval(function(){if(Math.abs(i.x)<.01&&Math.abs(i.y)<.01){clearInterval(s);return}t(i.x*30,i.y*30);i.x*=.8;i.y*=.8},10)})};var B=function(){o.bind("scroll"+x,function(e){L()})};var j=function(){o.unbind(x);e(window).unbind(x);e(document).unbind(x);o.data("perfect-scrollbar",null);o.data("perfect-scrollbar-update",null);o.data("perfect-scrollbar-destroy",null);f.remove();l.remove();u.remove();a.remove();f=l=p=d=v=m=g=y=b=w=E=S=null};var F=function(t){o.addClass("ie").addClass("ie"+t);var n=function(){var t=function(){e(this).addClass("hover")};var n=function(){e(this).removeClass("hover")};o.bind("mouseenter"+x,t).bind("mouseleave"+x,n);u.bind("mouseenter"+x,t).bind("mouseleave"+x,n);a.bind("mouseenter"+x,t).bind("mouseleave"+x,n);f.bind("mouseenter"+x,t).bind("mouseleave"+x,n);l.bind("mouseenter"+x,t).bind("mouseleave"+x,n)};var r=function(){k=function(){f.css({left:y+o.scrollLeft(),bottom:b,width:g});l.css({top:E+o.scrollTop(),right:S,height:w});f.hide().show();l.hide().show()}};if(t===6){n();r()}};var I="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;var q=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);if(e&&e[1]==="msie"){F(parseInt(e[2],10))}L();B();A();O();P();if(I){H()}if(o.mousewheel){_()}if(s.useKeyboard){D()}o.data("perfect-scrollbar",o);o.data("perfect-scrollbar-update",L);o.data("perfect-scrollbar-destroy",j)};q();return o})}})


/*
hash ids
*/
var Hashids=function(){"use strict";function Hashids(salt,minHashLength,alphabet){var uniqueAlphabet,i,j,len,sepsLength,diff,guardCount;this.version="0.3.0";this.minAlphabetLength=16;this.sepDiv=3.5;this.guardDiv=12;this.errorAlphabetLength="error: alphabet must contain at least X unique characters";this.errorAlphabetSpace="error: alphabet cannot contain spaces";this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";this.seps="cfhistuCFHISTU";this.minHashLength=parseInt(minHashLength,10)>0?minHashLength:0;this.salt=typeof salt==="string"?salt:"";if(typeof alphabet==="string"){this.alphabet=alphabet}for(uniqueAlphabet="",i=0,len=this.alphabet.length;i!==len;i++){if(uniqueAlphabet.indexOf(this.alphabet[i])===-1){uniqueAlphabet+=this.alphabet[i]}}this.alphabet=uniqueAlphabet;if(this.alphabet.length<this.minAlphabetLength){throw this.errorAlphabetLength.replace("X",this.minAlphabetLength)}if(this.alphabet.search(" ")!==-1){throw this.errorAlphabetSpace}for(i=0,len=this.seps.length;i!==len;i++){j=this.alphabet.indexOf(this.seps[i]);if(j===-1){this.seps=this.seps.substr(0,i)+" "+this.seps.substr(i+1)}else{this.alphabet=this.alphabet.substr(0,j)+" "+this.alphabet.substr(j+1)}}this.alphabet=this.alphabet.replace(/ /g,"");this.seps=this.seps.replace(/ /g,"");this.seps=this.consistentShuffle(this.seps,this.salt);if(!this.seps.length||this.alphabet.length/this.seps.length>this.sepDiv){sepsLength=Math.ceil(this.alphabet.length/this.sepDiv);if(sepsLength===1){sepsLength++}if(sepsLength>this.seps.length){diff=sepsLength-this.seps.length;this.seps+=this.alphabet.substr(0,diff);this.alphabet=this.alphabet.substr(diff)}else{this.seps=this.seps.substr(0,sepsLength)}}this.alphabet=this.consistentShuffle(this.alphabet,this.salt);guardCount=Math.ceil(this.alphabet.length/this.guardDiv);if(this.alphabet.length<3){this.guards=this.seps.substr(0,guardCount);this.seps=this.seps.substr(guardCount)}else{this.guards=this.alphabet.substr(0,guardCount);this.alphabet=this.alphabet.substr(guardCount)}}Hashids.prototype.encrypt=function(){var ret="",i,len,numbers=Array.prototype.slice.call(arguments);if(!numbers.length){return ret}if(numbers[0]instanceof Array){numbers=numbers[0]}for(i=0,len=numbers.length;i!==len;i++){if(typeof numbers[i]!=="number"||numbers[i]%1!==0||numbers[i]<0){return ret}}return this.encode(numbers)};Hashids.prototype.decrypt=function(hash){var ret=[];if(!hash.length||typeof hash!=="string"){return ret}return this.decode(hash,this.alphabet)};Hashids.prototype.encryptHex=function(str){var i,len,numbers;if(!/^[0-9a-fA-F]+$/.test(str)){return""}numbers=str.match(/[\w\W]{1,12}/g);for(i=0,len=numbers.length;i!==len;i++){numbers[i]=parseInt("1"+numbers[i],16)}return this.encrypt.apply(this,numbers)};Hashids.prototype.decryptHex=function(hash){var ret=[],i,len,numbers=this.decrypt(hash);for(i=0,len=numbers.length;i!==len;i++){ret+=numbers[i].toString(16).substr(1)}return ret};Hashids.prototype.encode=function(numbers){var ret,lottery,i,len,number,buffer,last,sepsIndex,guardIndex,guard,halfLength,excess,alphabet=this.alphabet,numbersSize=numbers.length,numbersHashInt=0;for(i=0,len=numbers.length;i!==len;i++){numbersHashInt+=numbers[i]%(i+100)}lottery=ret=alphabet[numbersHashInt%alphabet.length];for(i=0,len=numbers.length;i!==len;i++){number=numbers[i];buffer=lottery+this.salt+alphabet;alphabet=this.consistentShuffle(alphabet,buffer.substr(0,alphabet.length));last=this.hash(number,alphabet);ret+=last;if(i+1<numbersSize){number%=last.charCodeAt(0)+i;sepsIndex=number%this.seps.length;ret+=this.seps[sepsIndex]}}if(ret.length<this.minHashLength){guardIndex=(numbersHashInt+ret[0].charCodeAt(0))%this.guards.length;guard=this.guards[guardIndex];ret=guard+ret;if(ret.length<this.minHashLength){guardIndex=(numbersHashInt+ret[2].charCodeAt(0))%this.guards.length;guard=this.guards[guardIndex];ret+=guard}}halfLength=parseInt(alphabet.length/2,10);while(ret.length<this.minHashLength){alphabet=this.consistentShuffle(alphabet,alphabet);ret=alphabet.substr(halfLength)+ret+alphabet.substr(0,halfLength);excess=ret.length-this.minHashLength;if(excess>0){ret=ret.substr(excess/2,this.minHashLength)}}return ret};Hashids.prototype.decode=function(hash,alphabet){var ret=[],i=0,lottery,len,subHash,buffer,r=new RegExp("["+this.guards+"]","g"),hashBreakdown=hash.replace(r," "),hashArray=hashBreakdown.split(" ");if(hashArray.length===3||hashArray.length===2){i=1}hashBreakdown=hashArray[i];if(typeof hashBreakdown[0]!=="undefined"){lottery=hashBreakdown[0];hashBreakdown=hashBreakdown.substr(1);r=new RegExp("["+this.seps+"]","g");hashBreakdown=hashBreakdown.replace(r," ");hashArray=hashBreakdown.split(" ");for(i=0,len=hashArray.length;i!==len;i++){subHash=hashArray[i];buffer=lottery+this.salt+alphabet;alphabet=this.consistentShuffle(alphabet,buffer.substr(0,alphabet.length));ret.push(this.unhash(subHash,alphabet))}if(this.encode(ret)!==hash){ret=[]}}return ret};Hashids.prototype.consistentShuffle=function(alphabet,salt){var integer,j,temp,i,v,p;if(!salt.length){return alphabet}for(i=alphabet.length-1,v=0,p=0;i>0;i--,v++){v%=salt.length;p+=integer=salt[v].charCodeAt(0);j=(integer+v+p)%i;temp=alphabet[j];alphabet=alphabet.substr(0,j)+alphabet[i]+alphabet.substr(j+1);alphabet=alphabet.substr(0,i)+temp+alphabet.substr(i+1)}return alphabet};Hashids.prototype.hash=function(input,alphabet){var hash="",alphabetLength=alphabet.length;do{hash=alphabet[input%alphabetLength]+hash;input=parseInt(input/alphabetLength,10)}while(input);return hash};Hashids.prototype.unhash=function(input,alphabet){var number=0,pos,i;for(i=0;i<input.length;i++){pos=alphabet.indexOf(input[i]);number+=pos*Math.pow(alphabet.length,input.length-i-1)}return number};return Hashids}();


/*
jquery file drop
*/

(function(e){function r(){}jQuery.event.props.push("dataTransfer");var t={fallback_id:"",url:"",refresh:1e3,paramname:"userfile",requestType:"POST",allowedfileextensions:[],allowedfiletypes:[],maxfiles:25,maxfilesize:1,queuefiles:0,queuewait:200,data:{},headers:{},drop:r,dragStart:r,dragEnter:r,dragOver:r,dragLeave:r,docEnter:r,docOver:r,docLeave:r,beforeEach:r,afterAll:r,rename:r,error:function(e,t,n,r){alert(e)},uploadStarted:r,uploadFinished:r,progressUpdated:r,globalProgressUpdated:r,speedUpdated:r},n=["BrowserNotSupported","TooManyFiles","FileTooLarge","FileTypeNotAllowed","NotFound","NotReadable","AbortError","ReadError","FileExtensionNotAllowed"];e.fn.filedrop=function(r){function l(e){if(i.drop.call(this,e)===false)return false;if(!e.dataTransfer)return;f=e.dataTransfer.files;if(f===null||f===undefined||f.length===0){i.error(n[0]);return false}a=f.length;d();e.preventDefault();return false}function c(t,n,r,s){var o="--",u="\r\n",a="",f=i.paramname;if(i.data){var l=e.param(i.data).replace(/\+/g,"%20").split(/&/);e.each(l,function(){var e=this.split("=",2),t=decodeURIComponent(e[0]),n=decodeURIComponent(e[1]);if(e.length!==2){return}a+=o;a+=s;a+=u;a+='Content-Disposition: form-data; name="'+t+'"';a+=u;a+=u;a+=n;a+=u})}if(jQuery.isFunction(f)){f=f(t)}a+=o;a+=s;a+=u;a+='Content-Disposition: form-data; name="'+(f||"")+'"';a+='; filename="'+encodeURIComponent(t)+'"';a+=u;a+="Content-Type: "+r;a+=u;a+=u;a+=n;a+=u;a+=o;a+=s;a+=o;a+=u;return a}function h(e){if(e.lengthComputable){var t=Math.round(e.loaded*100/e.total);if(this.currentProgress!==t){this.currentProgress=t;i.progressUpdated(this.index,this.file,this.currentProgress);s[this.global_progress_index]=this.currentProgress;p();var n=(new Date).getTime();var r=n-this.currentStart;if(r>=i.refresh){var o=e.loaded-this.startData;var u=o/r;i.speedUpdated(this.index,this.file,u);this.startData=e.loaded;this.currentStart=n}}}}function p(){if(s.length===0){return}var e=0,t;for(t in s){if(s.hasOwnProperty(t)){e=e+s[t]}}i.globalProgressUpdated(Math.round(e/s.length))}function d(){u=false;if(!f){i.error(n[0]);return false}if(i.allowedfiletypes.push&&i.allowedfiletypes.length){for(var t=f.length;t--;){if(!f[t].type||e.inArray(f[t].type,i.allowedfiletypes)<0){i.error(n[3],f[t]);return false}}}if(i.allowedfileextensions.push&&i.allowedfileextensions.length){for(var t=f.length;t--;){var r=false;for(E=0;E<i.allowedfileextensions.length;E++){if(f[t].name.substr(f[t].name.length-i.allowedfileextensions[E].length).toLowerCase()==i.allowedfileextensions[E].toLowerCase()){r=true}}if(!r){i.error(n[8],f[t]);return false}}}var o=0,l=0;if(a>i.maxfiles&&i.queuefiles===0){i.error(n[1]);return false}var d=[];var b=[];var w=[];for(var E=0;E<a;E++){d.push(E)}var S=function(e){setTimeout(x,e);return};var x=function(){var e;if(u){return false}if(i.queuefiles>0&&b.length>=i.queuefiles){return S(i.queuewait)}else{e=d[0];d.splice(0,1);b.push(e)}try{if(g(f[e])!==false){if(e===a){return}var t=new FileReader,r=1048576*i.maxfilesize;t.index=e;if(f[e].size>r){i.error(n[2],f[e],e);b.forEach(function(t,n){if(t===e){b.splice(n,1)}});l++;return true}t.onerror=function(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:i.error(n[4]);return false;case e.target.error.NOT_READABLE_ERR:i.error(n[5]);return false;case e.target.error.ABORT_ERR:i.error(n[6]);return false;default:i.error(n[7]);return false}};t.onloadend=!i.beforeSend?T:function(t){i.beforeSend(f[e],e,function(){T(t)})};t.readAsDataURL(f[e])}else{l++}}catch(s){b.forEach(function(t,n){if(t===e){b.splice(n,1)}});i.error(n[0]);return false}if(d.length>0){x()}};var T=function(t){var n=(t.srcElement||t.target).index;if(t.target.index===undefined){t.target.index=v(t.total)}var r=new XMLHttpRequest,d=r.upload,g=f[t.target.index],E=t.target.index,S=(new Date).getTime(),x="------multipartformboundary"+(new Date).getTime(),T=s.length,N,C=m(g.name),k=g.type;if(i.withCredentials){r.withCredentials=i.withCredentials}var L=atob(t.target.result.split(",")[1]);if(typeof C==="string"){N=c(C,L,k,x)}else{N=c(g.name,L,k,x)}d.index=E;d.file=g;d.downloadStartTime=S;d.currentStart=S;d.currentProgress=0;d.global_progress_index=T;d.startData=0;d.addEventListener("progress",h,false);if(jQuery.isFunction(i.url)){r.open(i.requestType,i.url(),true)}else{r.open(i.requestType,i.url,true)}r.setRequestHeader("content-type","multipart/form-data; boundary="+x);r.setRequestHeader("X-Requested-With","XMLHttpRequest");e.each(i.headers,function(e,t){r.setRequestHeader(e,t)});if(!r.sendAsBinary){r.sendAsBinary=function(e){function t(e){return e.charCodeAt(0)&255}var n=Array.prototype.map.call(e,t);var r=new Uint8Array(n);this.send(r.buffer)}}r.sendAsBinary(N);s[T]=0;p();i.uploadStarted(E,g,a);r.onload=function(){var e=null;if(r.responseText){try{e=jQuery.parseJSON(r.responseText)}catch(t){e=r.responseText}}var f=(new Date).getTime(),c=f-S,h=i.uploadFinished(E,g,e,c,r);o++;b.forEach(function(e,t){if(e===n){b.splice(t,1)}});w.push(n);s[T]=100;p();if(o===a-l){y()}if(h===false){u=true}if(r.status<200||r.status>299){i.error(r.statusText,g,n,r.status)}}};x()}function v(e){for(var t=0;t<a;t++){if(f[t].size===e){return t}}return undefined}function m(e){return i.rename(e)}function g(e){return i.beforeEach(e)}function y(){return i.afterAll()}function b(e){clearTimeout(o);e.preventDefault();i.dragEnter.call(this,e)}function w(e){clearTimeout(o);e.preventDefault();i.docOver.call(this,e);i.dragOver.call(this,e)}function E(e){clearTimeout(o);i.dragLeave.call(this,e);e.stopPropagation()}function S(e){e.preventDefault();i.docLeave.call(this,e);return false}function x(e){clearTimeout(o);e.preventDefault();i.docEnter.call(this,e);return false}function T(e){clearTimeout(o);e.preventDefault();i.docOver.call(this,e);return false}function N(e){o=setTimeout(function(t){return function(){i.docLeave.call(t,e)}}(this),200)}var i=e.extend({},t,r),s=[],o,u=false,a=0,f;e("#"+i.fallback_id).css({display:"none",width:0,height:0});this.on("drop",l).on("dragstart",i.dragStart).on("dragenter",b).on("dragover",w).on("dragleave",E);e(document).on("drop",S).on("dragenter",x).on("dragover",T).on("dragleave",N);this.on("click",function(t){e("#"+i.fallback_id).trigger(t)});e("#"+i.fallback_id).change(function(e){i.drop(e);f=e.target.files;a=f.length;d()});return this};try{if(XMLHttpRequest.prototype.sendAsBinary){return}XMLHttpRequest.prototype.sendAsBinary=function(e){function t(e){return e.charCodeAt(0)&255}var n=Array.prototype.map.call(e,t);var r=new Uint8Array(n);if("ArrayBufferView"in window)this.send(r);else this.send(r.buffer)}}catch(i){}})(jQuery)